<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{% block title %}Green Stamp{% endblock %}</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Public+Sans:ital,wght@0,400;0,700;1,400&family=Rubik:wght@500;600&display=swap" rel="stylesheet">
  <style>
    :root {
      /* Color System */
      --dark-forest: #123524;
      --forest-green: #3E7B27;
      --sage-green: #85A947;
      --cream: #EFE3C2;
      --white: #ffffff;
      --black: #000000;
      
      /* Semantic Colors */
      --primary: var(--dark-forest);
      --secondary: var(--forest-green);
      --accent: var(--sage-green);
      --light: var(--cream);
      
      /* Text Colors */
      --text-primary: var(--dark-forest);
      --text-secondary: var(--forest-green);
      --text-light: var(--cream);
      --text-white: var(--white);
      --text-muted: rgba(18, 53, 36, 0.7);
      
      /* Background Colors */
      --bg-primary: var(--dark-forest);
      --bg-secondary: var(--forest-green);
      --bg-accent: var(--sage-green);
      --bg-light: var(--cream);
      
      /* Gradients */
      --gradient-primary: linear-gradient(135deg, var(--dark-forest), var(--forest-green));
      --gradient-secondary: linear-gradient(135deg, var(--forest-green), var(--sage-green));
      --gradient-accent: linear-gradient(135deg, var(--sage-green), var(--cream));
      --gradient-light: linear-gradient(135deg, var(--cream), var(--white));
      --gradient-hero: linear-gradient(135deg, var(--dark-forest) 0%, var(--forest-green) 50%, var(--sage-green) 100%);
      
      /* Spacing Scale */
      --space-xs: 0.25rem;
      --space-sm: 0.5rem;
      --space-md: 1rem;
      --space-lg: 1.5rem;
      --space-xl: 2rem;
      --space-2xl: 3rem;
      --space-3xl: 4rem;
      
      /* Typography Scale */
      --text-xs: 0.75rem;
      --text-sm: 0.875rem;
      --text-base: 1rem;
      --text-md: 1.125rem;
      --text-lg: 1.25rem;
      --text-xl: 1.5rem;
      --text-2xl: 1.875rem;
      --text-3xl: 2.25rem;
      --text-4xl: 3rem;
      --text-5xl: 3.75rem;
      
      /* Line Heights */
      --leading-tight: 1.25;
      --leading-normal: 1.5;
      --leading-relaxed: 1.75;
      
      /* Shadows */
      --shadow-sm: 0 2px 4px rgba(18, 53, 36, 0.1);
      --shadow-md: 0 4px 8px rgba(18, 53, 36, 0.15);
      --shadow-lg: 0 8px 16px rgba(18, 53, 36, 0.2);
      --shadow-xl: 0 16px 32px rgba(18, 53, 36, 0.25);
      
      /* Animation System */
      --transition-fast: 150ms ease;
      --transition-normal: 300ms ease;
      --transition-slow: 500ms ease;
      --ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);
      --ease-bounce: cubic-bezier(0.68, -0.55, 0.265, 1.55);
      
      /* Border Radius */
      --radius-sm: 0.375rem;
      --radius-md: 0.5rem;
      --radius-lg: 0.75rem;
      --radius-xl: 1rem;
      --radius-full: 9999px;
      
      /* Typography */
      --font-body: "Public Sans", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
      --font-brand: Rubik, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
      
      /* Component System */
      --component-padding-sm: var(--space-sm) var(--space-md);
      --component-padding-md: var(--space-md) var(--space-lg);
      --component-padding-lg: var(--space-lg) var(--space-xl);
      --component-gap-sm: var(--space-sm);
      --component-gap-md: var(--space-md);
      --component-gap-lg: var(--space-lg);
    }

    html, body {
      min-height: 100%;
      overflow-x: hidden;
    }

    body {
      background: var(--gradient-hero);
      color: var(--text-white);
      font-family: var(--font-body);
      -webkit-font-smoothing: antialiased;
      line-height: 1.6;
      margin: 0;
      min-height: 100vh;
      font-weight: 500;
      position: relative;
    }

    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: 
        radial-gradient(circle at 20% 80%, rgba(133, 169, 71, 0.3) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(62, 123, 39, 0.4) 0%, transparent 50%),
        radial-gradient(circle at 40% 40%, rgba(18, 53, 36, 0.2) 0%, transparent 50%);
      z-index: -1;
    }

    /* Adaptive text colors for better readability */
    .adaptive-text {
      color: var(--text-primary);
      text-shadow: 
        2px 2px 4px rgba(0, 0, 0, 0.8),
        0 0 8px rgba(255, 255, 255, 0.3),
        1px 1px 2px rgba(0, 0, 0, 0.9);
      font-weight: 600;
    }

    .adaptive-text-light {
      color: #ffffff;
      text-shadow: 
        2px 2px 4px rgba(0, 0, 0, 0.9),
        0 0 6px rgba(0, 0, 0, 0.7),
        1px 1px 3px rgba(0, 0, 0, 0.8);
      font-weight: 600;
    }

    .adaptive-text-dark {
      color: var(--text-primary);
      text-shadow: 
        1px 1px 2px rgba(255, 255, 255, 0.8),
        0 0 4px rgba(255, 255, 255, 0.6),
        2px 2px 4px rgba(255, 255, 255, 0.4);
      font-weight: 600;
    }

    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: inherit;
      filter: blur(8px);
      z-index: -1;
    }

    *, *:after, *:before {
      box-sizing: border-box;
      margin: 0;
    }

    img {
      max-width: 100%;
      height: auto;
    }

    a {
      color: var(--link-color);
    }

    h1, h2, h3, h4, h5 {
      line-height: 1.1;
      font-family: var(--font-brand);
      font-weight: 600;
      color: var(--gray-100);
    }

    h1 { font-size: var(--text-5xl); }
    h2 { font-size: var(--text-4xl); }
    h3 { font-size: var(--text-3xl); }
    h4 { font-size: var(--text-2xl); }
    h5 { font-size: var(--text-xl); }

    .wrapper {
      width: 100%;
      max-width: 83rem;
      margin-inline: auto;
      padding-inline: 1.5rem;
      background: var(--gradient-light);
      border-radius: 1rem;
      border: 1px solid rgba(255, 255, 255, 0.3);
      box-shadow: var(--shadow-xl);
      color: var(--text-primary);
      position: relative;
      overflow: hidden;
    }

    .wrapper::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: 
        linear-gradient(135deg, rgba(133, 169, 71, 0.1) 0%, transparent 50%),
        linear-gradient(45deg, rgba(62, 123, 39, 0.05) 0%, transparent 50%);
      z-index: 0;
    }

    .wrapper > * {
      position: relative;
      z-index: 1;
    }

    .stack {
      display: flex;
      flex-direction: column;
    }

    .gap-2 { gap: .5rem; }
    .gap-4 { gap: 1rem; }
    .gap-8 { gap: 2rem; }
    .gap-20 { gap: 5rem; }

    nav {
      z-index: 9999;
      position: relative;
      font-family: var(--font-brand);
      font-weight: 500;
      margin-bottom: 3.5rem;
      background: var(--gradient-light);
      border-radius: 1rem;
      border: 1px solid rgba(255, 255, 255, 0.3);
      box-shadow: var(--shadow-lg);
      margin: 1rem;
      position: relative;
      overflow: hidden;
    }

    nav::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: 
        linear-gradient(135deg, rgba(133, 169, 71, 0.1) 0%, transparent 50%),
        linear-gradient(45deg, rgba(62, 123, 39, 0.05) 0%, transparent 50%);
      z-index: 0;
    }

    nav > * {
      position: relative;
      z-index: 1;
    }

    .menu-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 1rem;
      padding: 1rem 1.5rem;
    }

    .site-title {
      display: flex;
      gap: var(--space-sm);
      align-items: center;
      line-height: var(--leading-tight);
      color: var(--text-primary);
      text-decoration: none;
      font-size: var(--text-lg);
      font-weight: 700;
      transition: transform var(--transition-normal);
    }

    .site-title::before {
      content: 'ðŸŒ¿';
      font-size: var(--text-xl);
      transition: transform var(--transition-normal);
    }

    .site-title:hover::before {
      transform: rotate(15deg) scale(1.1);
    }

    .site-title:hover {
      transform: scale(1.05);
    }

    .nav-items {
      margin: 0;
      display: flex;
      flex-direction: row;
      gap: 0.5rem;
      font-size: var(--text-sm);
      line-height: 1.2;
      list-style: none;
      padding: 0.5rem;
      background: var(--gradient-accent);
      border-radius: 999rem;
      border: 1px solid rgba(133, 169, 71, 0.3);
    }

    .link {
      display: inline-block;
      padding: 0.75rem 1.25rem;
      border-radius: 999rem;
      color: var(--text-primary);
      text-decoration: none;
      font-weight: 500;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
    }

    .link::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transition: left 0.5s;
    }

    .link:hover::before {
      left: 100%;
    }

    .link:hover, .link:focus {
      color: var(--text-white);
      background: var(--gradient-primary);
      transform: translateY(-2px);
      box-shadow: var(--shadow-md);
    }

    .link.active {
      color: var(--text-white);
      background: var(--gradient-primary);
      box-shadow: var(--shadow-lg);
    }

    .btn {
      position: relative;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 1rem 2rem;
      gap: 0.5rem;
      color: var(--text-white);
      text-decoration: none;
      line-height: 1.1;
      border-radius: 999rem;
      overflow: hidden;
      background: var(--gradient-primary);
      box-shadow: var(--shadow-md);
      white-space: nowrap;
      font-size: var(--text-lg);
      font-weight: 600;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      border: none;
      cursor: pointer;
      transform: translateY(0);
    }

    .btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
      transition: left 0.6s;
    }

    .btn:hover::before {
      left: 100%;
    }

    .btn:hover {
      transform: translateY(-3px);
      box-shadow: var(--shadow-xl);
      background: var(--gradient-secondary);
    }

    .btn:active {
      transform: translateY(-1px);
      box-shadow: 0 4px 15px rgba(46, 125, 50, 0.3);
    }

    .btn:focus {
      outline: none;
      box-shadow: 0 0 0 3px rgba(133, 169, 71, 0.3);
    }

    /* Accessibility Improvements */
    @media (prefers-reduced-motion: reduce) {
      * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }
    }

    /* Focus Management */
    .skip-link {
      position: absolute;
      top: -40px;
      left: 6px;
      background: var(--primary);
      color: var(--text-white);
      padding: 8px;
      text-decoration: none;
      border-radius: 4px;
      z-index: 1000;
    }

    .skip-link:focus {
      top: 6px;
    }

    /* High Contrast Mode Support */
    @media (prefers-contrast: high) {
      :root {
        --text-primary: #000000;
        --text-secondary: #333333;
        --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.3);
        --shadow-md: 0 4px 8px rgba(0, 0, 0, 0.4);
        --shadow-lg: 0 8px 16px rgba(0, 0, 0, 0.5);
        --shadow-xl: 0 16px 32px rgba(0, 0, 0, 0.6);
      }
    }

    footer {
      display: flex;
      flex-direction: column;
      gap: 3rem;
      margin-top: auto;
      padding: 3rem 2rem;
      text-align: center;
      color: var(--gray-400);
      font-size: var(--text-sm);
    }

    footer a {
      color: var(--gray-400);
      text-decoration: 1px solid underline transparent;
      text-underline-offset: .25em;
      transition: text-decoration-color var(--theme-transition);
    }

    footer a:hover, footer a:focus {
      text-decoration-color: currentColor;
    }

    .alert {
      padding: 1rem;
      margin: 1rem 0;
      border-radius: .5rem;
      font-weight: 600;
    }

    .alert-success {
      background-color: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }

    .alert-warning {
      background-color: #fff3cd;
      color: #856404;
      border: 1px solid #ffeaa7;
    }

    .alert-error {
      background-color: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
    }

    @media (max-width: 50em) {
      nav {
        margin: 0.5rem;
        border-radius: 0.75rem;
      }
      
      .menu-header {
        flex-direction: column;
        gap: 1rem;
        padding: 1rem;
      }
      
      .nav-items {
        flex-direction: column;
        gap: 0.5rem;
        padding: 1rem;
        width: 100%;
      }
      
      .link {
        padding: 0.75rem 1rem;
        text-align: center;
        width: 100%;
      }

      .btn {
        padding: 0.875rem 1.5rem;
        font-size: var(--text-base);
      }

      .wrapper {
        margin: 0.5rem;
        padding: 1rem;
      }
    }

    @media (min-width: 50em) {
      nav {
        display: grid;
        grid-template-columns: 1fr auto 1fr;
        align-items: center;
        padding: 2.5rem 5rem;
        gap: 1rem;
      }

      .menu-header {
        padding: 0;
      }

      .btn {
        padding: 1.125rem 2.5rem;
        font-size: var(--text-xl);
      }

      footer {
        flex-direction: row;
        justify-content: space-between;
        padding: 2.5rem 5rem;
      }
    }

    {% block styles %}{% endblock %}
  </style>
</head>
<body>
  <a href="#main-content" class="skip-link">Skip to main content</a>
  <div class="stack">
    <nav>
      <div class="menu-header">
        <a href="{{ url_for('index') }}" class="site-title">
          ðŸŒ¿ Green Stamp
        </a>
        <ul class="nav-items">
          <li><a href="{{ url_for('index') }}" class="link {% if request.endpoint == 'index' %}active{% endif %}">Home</a></li>
          <li><a href="{{ url_for('projects') }}" class="link {% if request.endpoint == 'projects' %}active{% endif %}">Projects</a></li>
          <li><a href="{{ url_for('register') }}" class="link {% if request.endpoint == 'register' %}active{% endif %}">Register</a></li>
          <li><a href="{{ url_for('admin') }}" class="link {% if request.endpoint == 'admin' %}active{% endif %}">Admin</a></li>
        </ul>
      </div>
    </nav>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <div class="alert alert-{{ category }}">
            {{ message }}
          </div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    <main id="main-content">
      {% block content %}{% endblock %}
    </main>

    <footer>
      <div class="group">
        <p>Â© 2025 Green Stamp â€” Protecting Nature Together</p>
      </div>
    </footer>
  </div>

  {% block scripts %}{% endblock %}
</body>
</html>
