{% extends "base.html" %}

{% block title %}Green Stamp | Admin Panel{% endblock %}

{% block styles %}
    .admin-header {
      text-align: center;
      padding: 4rem 2rem;
    }

    .admin-header h1 {
      font-size: var(--text-4xl);
      color: var(--gray-0);
      margin-bottom: 1rem;
    }

    .admin-header p {
      font-size: var(--text-lg);
      color: var(--gray-300);
    }

    .projects-table {
      width: 100%;
      border-collapse: collapse;
      margin: 2rem 0;
      background: var(--gray-999);
      border-radius: .75rem;
      overflow: hidden;
      box-shadow: var(--shadow-sm);
    }

    .projects-table th,
    .projects-table td {
      padding: 1rem;
      text-align: left;
      border-bottom: 1px solid var(--gray-800);
    }

    .projects-table th {
      background: var(--gray-900);
      color: var(--gray-100);
      font-weight: 600;
    }

    .projects-table td {
      color: var(--gray-200);
    }

    .status-badge {
      padding: 0.25rem 0.75rem;
      border-radius: 999rem;
      font-size: var(--text-sm);
      font-weight: 600;
    }

    .status-pending {
      background: #fff3cd;
      color: #856404;
    }

    .status-approved {
      background: #d4edda;
      color: #155724;
    }

    .status-rejected {
      background: #f8d7da;
      color: #721c24;
    }

    .action-buttons {
      display: flex;
      gap: 0.5rem;
    }

    .btn-small {
      padding: 0.5rem 1rem;
      font-size: var(--text-sm);
      border-radius: 0.5rem;
      text-decoration: none;
      border: none;
      cursor: pointer;
      transition: all var(--theme-transition);
    }

    .btn-approve {
      background: var(--accent-regular);
      color: var(--accent-text-over);
    }

    .btn-approve:hover {
      background: var(--accent-dark);
    }

    .btn-reject {
      background: #dc3545;
      color: white;
    }

    .btn-reject:hover {
      background: #c82333;
    }

    .project-description {
      max-width: 300px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    @media (min-width: 50em) {
      .admin-header h1 {
        font-size: var(--text-5xl);
      }
    }
{% endblock %}

{% block content %}
<div class="wrapper">
  <header class="admin-header">
    <h1>Admin Panel</h1>
    <p>Manage and review project submissions</p>
  </header>

  <table class="projects-table">
    <thead>
      <tr>
        <th>Project Name</th>
        <th>Location</th>
        <th>Description</th>
        <th>Status</th>
        <th>Submitted</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for project in projects %}
      <tr>
        <td><strong>{{ project.name }}</strong></td>
        <td>{{ project.location }}</td>
        <td class="project-description">{{ project.description }}</td>
        <td>
          <span class="status-badge status-{{ project.status }}">
            {{ project.status.title() }}
          </span>
        </td>
        <td>{{ project.created_at.strftime('%Y-%m-%d') if project.created_at else 'N/A' }}</td>
        <td>
          {% if project.status == 'pending' %}
          <div class="action-buttons">
            <a href="{{ url_for('approve_project', project_id=project.id) }}" 
               class="btn-small btn-approve">Approve</a>
            <a href="{{ url_for('reject_project', project_id=project.id) }}" 
               class="btn-small btn-reject">Reject</a>
          </div>
          {% else %}
          <span class="status-badge status-{{ project.status }}">
            {{ project.status.title() }}
          </span>
          {% endif %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
